# Summary


This Malware Triage section is focused solely on quick triage to determine if a sample is indeed "malicious" and likely malware. It doesn’t cover in-depth analysis, such as reverse engineering or examining specific functions like UAC bypass or log deletion. For a detailed breakdown of all capabilities in a sample, it’s best to consult professionals who specialize in malware analysis.

## How to start?

1. First, we need to install **Windows Sandbox** on our machine, as it will be used for dynamic analysis. Source: https://learn.microsoft.com/en-us/windows/security/application-security/application-isolation/windows-sandbox/windows-sandbox-overview

![image](https://github.com/user-attachments/assets/484bd6a0-c7ed-49cb-8112-a97b4f466c94)

2. Next, we need to configure AV exclusions on our **Forensics VM** by excluding the **Downloads** folder and the **C:\Temp** folder. If you haven't setup your **Forensics VM** yet... Please do this first: https://github.com/DebugPrivilege/OpenProject/tree/main/1.%20How%20to%20setup%20IR%20Toolkit%3F

To exclude the **Downloads** folder from Windows Defender AV:

```
Add-MpPreference -ExclusionPath "C:\Users\YourUsername\Downloads"
```

To exclude the **C:\Temp** folder from Windows Defender AV:

```
Add-MpPreference -ExclusionPath "C:\Temp"
```

![image](https://github.com/user-attachments/assets/1f34aa3b-b854-4b07-ac2a-ba5029621881)

## How can a customer share Malware safely?

The customer should compress the malware sample into a **.7z** file using **7zip** and set the password to infected (without quotes). After that, they can share the file via a shared OneDrive, for example. It can be downloaded here: https://7-zip.org/download.html

## What is the first thing you should do when receiving a malware sample?

Start by running **Sigcheck.exe** from SysInternals to obtain the **SHA256** hash of the sample. Then, copy this hash and check it on **VirusTotal** for any existing detections. Consider these questions: Is the binary unsigned? Does it include any description or company information in the PE header?

![image](https://github.com/user-attachments/assets/51b34372-98be-4217-9a93-d69912a57a0c)

VirusTotal identified the file as malicious. It's also a good idea to check the "Community" tab for comments from other users, which may provide helpful insights into the nature of the malware sample.

![image](https://github.com/user-attachments/assets/1134b4db-806f-450c-8264-42da368b05e8)

## What is the next step?

Use the capa.exe tool to analyze the binary and reveal any specific functionalities it might contain. You can do this by running the following command:

```
capa.exe C:\Temp\LBB.exe
```

When malware is packed, it means the malware has been compressed or encrypted using special software to make it harder to detect or analyze. This "packing" hides the actual malicious code from analysts, which makes it more difficult to see what the malware does until it's unpacked.

![image](https://github.com/user-attachments/assets/2bb8403d-41e9-4ed9-bb09-e1aaf20b6878)

Otherwise if the malware is not packed, you may see something like this:

![image](https://github.com/user-attachments/assets/8ab46d38-7424-43d0-9051-9c96675869f1)

Another useful tool is PE Studio, which can be used to analyze Windows executables to assess security risks without needing to execute the file. It helps to identify suspicious characteristics, such as unusual metadata imports, functions, and other indicators that may suggest malicious behavior.

![image](https://github.com/user-attachments/assets/dc22fe17-7397-410e-913b-af93f4b76def)











